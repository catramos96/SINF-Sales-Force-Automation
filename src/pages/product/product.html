<ion-header>
  <!-- NAVBAR -->
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Product</ion-title>
  </ion-navbar>
</ion-header>
<!-- Page Content -->
<ion-content>
  <ion-grid>
    <ion-row>
      <!-- CATEGORIES-->
      <ion-col col-4>
        <!-- search categories -->
        <div >
          <ion-searchbar placeholder="Search by category"
            [(ngModel)]="searchC"
            [showCancelButton]="shouldShowCancel"
            (ionInput)="searchCategory($event)"
            (ionCancel)="onCancel($event)">
          </ion-searchbar> 
        </div>
        <!-- list categories -->       
        <ion-list>
          <ion-item *ngFor="let c of categories; let i=index" text-wrap (click)="toggleGroup(i,c.category)" [ngClass]="{active: isGroupShown(i)}">
            <h3>
              <ion-icon color="success" item-right [name]="isGroupShown(i) ? 'arrow-dropdown' : 'arrow-dropright'"></ion-icon>
              {{c.category}}
            </h3>
            <div *ngIf="isGroupShown(i)">
              <ion-item *ngFor="let y of categoryProducts; let j=index" text-wrap>
                {{y.name}}
              </ion-item>
            </div>
          </ion-item>
        </ion-list>
      </ion-col>
      <!-- PRODUCTS-->
      <ion-col col-8>
        <!-- search products --> 
        <ion-searchbar placeholder="Search by product"
          [(ngModel)]="searchP"
          [showCancelButton]="shouldShowCancel"
          (ionInput)="searchProduct($event)"
          (ionCancel)="onCancel($event)">
        </ion-searchbar>
        <!-- list products -->
        <ion-grid>
          <ion-row *ngFor="let r of products">
            <ion-col *ngFor="let c of r.row">
              <!-- product -->
              <ion-card class="color">

                <ion-card-header class="inline">
                  <h2>{{c.name}}</h2>
                  <p class=" muted">{{c.category}}</p>
                </ion-card-header>
                <button ion-button icon-right clear item-end class="right" (click)="openModal(c.name)">
                    <ion-icon name="open"></ion-icon>
                </button>
              
                <ion-card-content>
                  <img src="../../../../resources/android/danone.jpeg"/>
                  <p>
                    <br>
                    <b>Price: </b>{{c.price}}<br>
                    <b>Quantity: </b>{{c.units}}
                  </p>
                </ion-card-content>
  
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
